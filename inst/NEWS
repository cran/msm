-*- text -*-

USER-VISIBLE CHANGES (for detailed changes see ChangeLog in the source package)
--------------------

Version 0.5 (2005-03-06)
-----------

* Major update. Much of the internal R and C code has been re-written.

* General continuous-time hidden Markov models can now be fitted with
  msm, as well as misclassification models.  Allowed response
  distributions conditionally on the hidden state include categorical,
  normal, Poisson, exponential and others.  See the new "hmodel"
  argument. Misclassification models can either be fitted in the old
  style using an ematrix, or using a general HMM with a categorical
  response distribution.  Covariates can be fitted to many of the new
  hidden response processes via generalized regressions.  See
  "hcovariates", "hcovinits" arguments.

* Per-observation observation schemes, generalising the "exacttimes"
  and "death" concepts.  An optional new variable in the data can
  specify whether each observation is a snapshot of the process, an
  exactly-observed transition time, or a death state.  Observations
  are allowed to be at identical times, for example, a snapshot
  followed instantly by an exact transition time.

* Various syntax changes for cleaner moder specification. 

  - Instead of 0/1 indicators, qmatrix and ematrix should contain the
  initial values for the transition intensity / misclassification
  matrix.  These matrices can be named with names for the states of
  the Markov chain.

  - The inits argument is abolished.  Initial values are estimated
  automatically if the new argument to msm "gen.inits = TRUE" is
  supplied.  This uses the initial values calculated by
  crudeinits.msm.

  - misc no longer needs to be specified if an ematrix is supplied.

  - fixedpars=TRUE fixes all parameters, or specific parameters can
  be fixed as before.

  - crudeinits.msm takes a state ~ time formula instead of two
  separate state, time arguments, for consistency with the msm
  function.

  - Initial values for covariate effects on transition rates /
  misclassification probabilities are assumed to be zero unless
  otherwise specified by the new "covinits" / "misccovinits" argument.
  
* Support for 'from-to' style data has been withdrawn. Storing data in
  this format is inadvisable as it destroys the longitudinal nature of
  the data.

* Speed improvements.  The algorithm for calculating the likelihood
  for non-hidden multi-state models has changed so that the matrix
  exponential of the Q matrix is only calculated once for each time
  difference / covariate combination.  Therefore, users should see
  speed improvements for data where the same from-state, to-state,
  time difference, covariates combination appears many times.

* Confidence intervals are now presented instead of standard errors
  for uncertainty in parameter estimates. 

* New method of calculating matrix exponentials when the eigenvector
  matrix is not invertible.  It now uses the more robust method of
  Pade approximants with scaling and squaring, instead of power
  series.  Faster LAPACK routines are now used for matrix inversion. 

* covmatch argument to msm has been abolished.  To take a
  time-dependent covariate value from the end of the relevant
  transition instead of the default start, users are expected to
  manipulate their data accordingly before calling msm, shifting the
  positions of the covariate back by one within each subject.

* Syntax changes for simmulti.msm. 

Bug fixes 
---------

* The likelihood is now calculated correctly for individuals with
   censored intermediate states, as well as censored initial and final states.
   Thanks to Michael Sweeting for reporting this. 

* hazard.scale and odds.scale were interpreted wrongly in hazard.msm
  and odds.msm respectively.

* time-dependent covariate values now taken from the start instead of
  end of the transition under hidden Markov models.


Version 0.41 (January 28, 2005)
------------

* Censored outcomes in misclassification models are assumed to be not
  subject to misclassification. 

* A couple of bug fixes for exact transition times.


Version 0.4 (January 7, 2005)
-----------

* Censored observations are now supported, via new "censor" and
  "censor.states" arguments.  A censored observation is unknown, but
  known to be one of a particular set of states.

A major update to msm is under development, for release in the first
half of 2005. This will support hidden Markov models with general
response distributions.


Version 0.3.3 (September 18, 2004)
-------------

* Maintenance release with minor fixes and enhancements ready for
R-2.0.0. 


Version 0.3.2 (March 25, 2003)
-------------

* More than one death state is now permitted, through the "death"
argument. Death states are those whose exact entry time is known,
but the state at the previous instant before death is unknown.

* The "tunit" argument has been abolished.  Death times are now
assumed to be exact rather than known within one day.  This makes
more sense since for longitudinal studies, all observations are
usually recorded to within one basic time unit, not just death
times.

* Cleanups of the manual and minor fixes, as detailed in ChangeLog.


Version 0.3.1 (October 14, 2003)
-------------

* Bug fix. The likelihood was being wrongly calculated in cases when
both the data represent exact transition times and the transition
intensity matrix had repeated eigenvalues. 

* The "death" argument is no longer ignored when exacttimes=TRUE, as
it is reasonable to have the entry time into one state accurate to
within one day, and all other times exactly accurate.

* More memory problems should be fixed. 


Version 0.3 (September 29, 2003)
-------------

* Two errors in the calculation of the likelihood for a multi-state
model have been corrected. These bugs affect only models with
reversible transition matrices, that is, models which allow
progression and regression between states.

* The first bug occurred when death times were known to within one time
unit (death = TRUE) - the likelihood calculation did not account for
reversible states.

* The second bug occurred when the data represent exact transition times
(exacttimes = TRUE). The likelihood calculation did not properly
account for reversible states.

* Baseline transition intensities, or misclassification probabilities,
can now be constrained to be equal to each other, in the same manner
as covariate effects. Specified by new arguments "qconstraint" or
"econstraint".

* The memory allocation problems of version 0.2 have been fixed. 


Version 0.22 (June 30, 2003)
--------------

* Fixed some minor bugs, as detailed in ChangeLog. 

* New function, pmatrix.piecewise.msm, for calculating transition
probability matrices for processes with piecewise-constant
intensities.


Version 0.21 (June 3, 2003)
--------------

* Fixed a handful of minor bugs, as detailed in ChangeLog. 

* Minor edits and additions to the manual.

* The subject ID can now be factor or character.


Version 0.2 (January 2003)
-------------

* A full manual in PDF format is included in the doc directory. This
gives the mathematical background behind multi-state modelling, and a
tutorial in the typical use of the functions in the msm package.

* Many more methods for extracting summary statistics from the fitted
model are included.  These are generally called with the fitted model
as the argument, plus an optional argument indicating the assumed
covariate values. The functions include qmatrix.msm, ematrix.msm,
pmatrix.msm, qratio.msm, sojourn.msm, totlos.msm, hazard.msm,
odds.msm, prevalence.msm. 

* New function statetable.msm to calculate frequencies of transitions
between pairs of states observed in the data.

* New function crudeinits.msm to estimate transition intensities
assuming the data represent the exact transition times of the Markov
process. These can be used as initial values in the msm function for
fitting the model. 

* prevalencemisc.msm has been removed, as its methodology was
overcomplicated and confusing.  The methods used in prevalence.msm
have been extended naturally to deal with misclassification models.

* Fix of a bug in the likelihood calculation for misclassification
models (the number of non-death states was assumed to be the same as
the number of states that could be misclassified, leading to failure
to calculate the likelihood for models where some states are observed
without error, but are not death states. ) Thanks to Martyn Plummer
for reporting this.

* Fix of a bug in the simulation routines (getobs.msm, called by
simmulti.msm), where for models with absorbing states, the absorbing 
state is not retained in the simulated data.   

* New heart transplant example data set, as used in the manual, so
that all the examples given in the manual can be run by the user.

* Tidying of the help pages. 


Version 0.1 (November 2002)
-------------

* First release. 